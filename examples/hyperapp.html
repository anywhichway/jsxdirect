<html>
<head>
<script src="https://cdn.jsdelivr.net/npm/hyperapp@1.2.6/dist/hyperapp.min.js"></script>
<script src="../index.js"></script>

<script type="text/jsx">
const Clock = (state,actions) => {
	let time = new Date().toLocaleTimeString();
    return (<div>Time:<span>${ time }</span></div>);
}
</script>

<script>
jsx.compile();
</script>

</head>
<body>
<div id="directions">
	<p>View the source to see how this page works to compile JSX on the fly in the browser.</p>
	<p>Below is dynamically generated content:
		<ul>
			<li>Hyperapp rendered clock</li>
			<li>Hyperapp rendered inline JSX</li>
			<li>Hyperapp rendered function invocation</li>
			<li>The body of this directions div as a function</li>
			<li>The VDOM of this directions div generated by the function</li>
			<li>Hyperapp rendered repeat of this info</li>
		</ul>
	</p>
</div>
<div id="clock"></div>
<div id="hello"></div>
<div id="cool"></div>
<div><pre id="compiled"></pre></div>
<div><pre id="vdom"><pre></div>
<div id="repeat"></div>

<script>

hyperapp.app({},{},Clock,document.getElementById("clock"));

hyperapp.app({},{},() => 
		jsx(`<div id='foo'>
				<span> Hello, world! </span>
				<button onclick={ e => alert('hi!') }>Click Me</button>
				</div>`)
		,document.getElementById("hello"));
		
hyperapp.app({},{},jsx.compile("function() { return(<div>Pretty cool, huh?</div>) }")(),document.getElementById("cool"));
	
const compiled = jsx.compile("function() { return jsx(document.getElementById('directions').innerHTML) }");

document.getElementById("compiled").innerText = compiled+"";

document.getElementById("vdom").innerText = JSON.stringify({nodeName:"div",attributes:{},children:compiled()});

hyperapp.app({},{},() => ({nodeName:"div",attributes:{},children:compiled()}),document.getElementById("repeat"));

</script>

</body>
</html>
