# jsxdirect

A browser based JSX transpiler supporting entire script blocks, functions, and simple HTML. You can also use string literal format `${}` instead of `{}` and compile DOM nodes and their children into render functions.

# Usage

1) Load your front-end library that uses a virtual DOM.
2) Ensure you have an "h" function available as a property on an object, e.g. `preact.h`.
3) Define your functions in script blocks of type "text/jsx".
4) Compile your script blocks using `jsx.compile` and pass in the variable name associated with the object supporting "h".

The example below can be found in the `examples` directory. You can also <a href="https://anywhichway.github.io/jsxdirect/examples/preact.html" target="_blank">try it out</a>. Your JSX can use either `{}` or `${}` delimiters.

```html
<html>
<head>
<script src="https://cdn.jsdelivr.net/npm/preact/dist/preact.js"></script>
<script src="../index.js"></script>

<script type="text/jsx">
class Clock extends preact.Component {
  render() {
	let time = new Date().toLocaleTimeString();
      return (<div>Time:<span>${ time }</span></div>);
  }
}
</script>

<script>
jsx.compile({env:"preact"});
</script>

</head>
<body>
<div id="directions">
	<p>View the source to see how this page works to compile JSX on the fly in the browser.</p>
	<p>Below is dynamically generated content:
		<ul>
			<li>Preact rendered clock</li>
			<li>Preact rendered inline JSX</li>
			<li>Preact rendered function invocation</li>
			<li>The body of this directions div as a function</li>
			<li>The VDOM of this directions div generated by the function</li>
			<li>Preact rendered repeat of this info</li>
		</ul>
	</p>
</div>
<div id="clock"></div>
<div id="hello"></div>
<div id="cool"></div>
<div><pre id="compiled"></pre></div>
<div><pre id="vdom"><pre></div>
<div id="repeat"></div>

<script>
preact.render(new Clock().render(),document.getElementById("clock"));

preact.render(jsx(
		`<div id='foo'>
		<span> Hello, world! </span>
		<button onclick={ e => alert('hi!') }>Click Me</button>
		</div>`,{env:"preact"}),document.getElementById("hello"));
		
preact.render(jsx.compile({env:"preact"},
		"function() { return(<div>Pretty cool, huh?</div>) }")(),document.getElementById("cool"));
	
const compiled = jsx.compile({env:"preact"},
		"function() { return jsx(document.getElementById('directions').innerHTML) }");

document.getElementById("compiled").innerText = compiled+"";

document.getElementById("vdom").innerText = JSON.stringify({nodeName:"div",attributes:{},children:compiled()});

preact.render({nodeName:"div",attributes:{},children:compiled()},document.getElementById("repeat"));

</script>

</body>
</html>
```

Or, as you can see above, wrap JSX in `jsx(<jsx string>,<options>)` and pass it directly to a VDOM consumer.

Or, compile functions containing JSX using `jsx.compile(<options>,<function definition string>)`, and pass the result of invoking them to a VDOM consumer.

# Credits

The JSX parser is based on the work of @stolksdorf.

# License

MIT

# Release History (reverse chronological order)

2018-06-25 v0.0.1 Initial public release
